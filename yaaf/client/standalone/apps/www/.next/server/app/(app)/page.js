(()=>{var e={};e.id=7198,e.ids=[7198,8025,2740,2626],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3076:e=>{"use strict";e.exports=require("shiki")},6113:e=>{"use strict";e.exports=require("crypto")},9411:e=>{"use strict";e.exports=require("node:path")},7742:e=>{"use strict";e.exports=require("node:process")},1041:e=>{"use strict";e.exports=require("node:url")},9942:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),s(7934),s(3548),s(5866),s(8939);var r=s(3191),n=s(8716),a=s(7922),o=s.n(a),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let c=["",{children:["(app)",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7934)),"/home/alce/work/home/alce/src/agents_framework/frontend/apps/www/app/(app)/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,3548)),"/home/alce/work/home/alce/src/agents_framework/frontend/apps/www/app/(app)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,8939)),"/home/alce/work/home/alce/src/agents_framework/frontend/apps/www/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/alce/work/home/alce/src/agents_framework/frontend/apps/www/app/(app)/page.tsx"],u="/(app)/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/(app)/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},8813:(e,t,s)=>{Promise.resolve().then(s.bind(s,3444))},3444:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var r=s(326),n=s(7874),a=s(7863),o=s(7272),i=s(8025);function l(){let{messages:e,input:t,handleInputChange:s,handleSubmit:l,append:c,stop:d,isLoading:u,setMessages:p}=(0,n.RJ)({api:"/api/chat",body:{session_id:Math.random().toString(36).substring(2,15)}});return r.jsx("div",{className:"mx-auto grid h-[90vh] w-full max-w-4xl place-items-center bg-background",children:r.jsx("div",{className:(0,a.cn)("flex","flex-col","h-[80vh]","w-full","overflow-none"),children:r.jsx(i.Chat,{className:"grow",messages:e,handleSubmit:l,input:t,handleInputChange:s,isGenerating:u,stop:d,append:c,setMessages:p,transcribeAudio:o.K,suggestions:["what are the most common types of finds in the dataset?","Plot the distribution of finds by type"]})})})}},7272:(e,t,s)=>{"use strict";async function r(e){let t=new File([e],"recording.webm",{type:"audio/webm"}),s=new FormData;s.append("audio",t);let r=await fetch("/api/transcribe",{method:"POST",body:s});if(!r.ok)throw Error((await r.json()).error||"Failed to transcribe audio");return(await r.json()).text}s.d(t,{K:()=>r})},2740:(e,t,s)=>{"use strict";s.r(t),s.d(t,{useAutoScroll:()=>n});var r=s(7577);function n(e){let t=(0,r.useRef)(null),s=(0,r.useRef)(null),[n,a]=(0,r.useState)(!0);return{containerRef:t,scrollToBottom:()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},handleScroll:()=>{if(t.current){let{scrollTop:e,scrollHeight:r,clientHeight:n}=t.current,o=!!s.current&&e<s.current,i=s.current?s.current-e:0;o&&i>10?a(!1):a(50>Math.abs(r-e-n)),s.current=e}},shouldAutoScroll:n,handleTouchStart:()=>{a(!1)}}}},8025:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Chat:()=>x,ChatContainer:()=>g,ChatForm:()=>w,ChatMessages:()=>f});var r=s(326),n=s(7577),a=s(4274),o=s(8610),i=s(2112),l=s(7863),c=s(2740),d=s(1613),u=s(6699),p=s(1142),m=s(1015),h=s(2626);function x({messages:e,handleSubmit:t,input:s,handleInputChange:i,stop:l,isGenerating:c,append:x,suggestions:v,className:b,onRateResponse:j,setMessages:y,transcribeAudio:N}){let _=e.at(-1),k=0===e.length,C=_?.role==="user",P=(0,n.useRef)(e);P.current=e;let S=(0,n.useCallback)(()=>{if(l?.(),!y)return;let e=[...P.current],t=e.findLast(e=>"assistant"===e.role);if(!t)return;let s=!1,r={...t};if(t.toolInvocations){let e=t.toolInvocations.map(e=>"call"===e.state?(s=!0,{...e,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}):e);s&&(r={...r,toolInvocations:e})}if(t.parts&&t.parts.length>0){let e=t.parts.map(e=>"tool-invocation"===e.type&&e.toolInvocation&&"call"===e.toolInvocation.state?(s=!0,{...e,toolInvocation:{...e.toolInvocation,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}}):e);s&&(r={...r,parts:e})}if(s){let s=e.findIndex(e=>e.id===t.id);-1!==s&&(e[s]=r,y(e))}},[l,y,P]),q=(0,n.useCallback)(e=>({actions:j?(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"border-r pr-1",children:r.jsx(u.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),r.jsx(d.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>j(e.id,"thumbs-up"),children:r.jsx(a.Z,{className:"h-4 w-4"})}),r.jsx(d.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>j(e.id,"thumbs-down"),children:r.jsx(o.Z,{className:"h-4 w-4"})})]}):r.jsx(u.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),[j]);return(0,r.jsxs)(g,{className:b,children:[k&&x&&v?r.jsx(h.PromptSuggestions,{label:"Try these prompts âœ¨",append:x,suggestions:v}):null,e.length>0?r.jsx(f,{messages:e,children:r.jsx(m.MessageList,{messages:e,isTyping:C,messageOptions:q})}):null,r.jsx(w,{className:"mt-auto",isPending:c||C,handleSubmit:t,children:({files:e,setFiles:t})=>r.jsx(p.MessageInput,{value:s,onChange:i,allowAttachments:!0,files:e,setFiles:t,stop:S,isGenerating:c,transcribeAudio:N})})]})}function f({messages:e,children:t}){let{containerRef:s,scrollToBottom:n,handleScroll:a,shouldAutoScroll:o,handleTouchStart:l}=(0,c.useAutoScroll)([e]);return(0,r.jsxs)("div",{className:"grid grid-cols-1 overflow-y-auto pb-4",ref:s,onScroll:a,onTouchStart:l,children:[r.jsx("div",{className:"max-w-full [grid-column:1/1] [grid-row:1/1]",children:t}),!o&&r.jsx("div",{className:"pointer-events-none flex flex-1 items-end justify-end [grid-column:1/1] [grid-row:1/1]",children:r.jsx("div",{className:"sticky bottom-0 left-0 flex w-full justify-end",children:r.jsx(d.z,{onClick:n,className:"pointer-events-auto h-8 w-8 rounded-full ease-in-out animate-in fade-in-0 slide-in-from-bottom-1",size:"icon",variant:"ghost",children:r.jsx(i.Z,{className:"h-4 w-4"})})})})]})}x.displayName="Chat";let g=(0,n.forwardRef)(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,l.cn)("grid max-h-full w-full grid-rows-[1fr_auto]",e),...t}));g.displayName="ChatContainer";let w=(0,n.forwardRef)(({children:e,handleSubmit:t,isPending:s,className:a},o)=>{let[i,l]=(0,n.useState)(null);return r.jsx("form",{ref:o,onSubmit:e=>{if(!i){t(e);return}t(e,{experimental_attachments:function(e){let t=new DataTransfer;for(let s of Array.from(e))t.items.add(s);return t.files}(i)}),l(null)},className:a,children:e({files:i,setFiles:l})})});w.displayName="ChatForm"},1015:(e,t,s)=>{"use strict";s.r(t),s.d(t,{MessageList:()=>o});var r=s(326),n=s(500),a=s(9821);function o({messages:e,showTimeStamps:t=!0,isTyping:s=!1,messageOptions:o}){return(0,r.jsxs)("div",{className:"space-y-4 overflow-visible",children:[e.map((e,s)=>{let a="function"==typeof o?o(e):o;return r.jsx(n.ChatMessage,{showTimeStamp:t,...e,...a},s)}),s&&r.jsx(a.TypingIndicator,{})]})}},2626:(e,t,s)=>{"use strict";s.r(t),s.d(t,{PromptSuggestions:()=>n});var r=s(326);function n({label:e,append:t,suggestions:s}){return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-center text-2xl font-bold",children:e}),r.jsx("div",{className:"flex gap-6 text-sm",children:s.map(e=>r.jsx("button",{onClick:()=>t({role:"user",content:e}),className:"h-max flex-1 rounded-xl border bg-background p-4 hover:bg-muted",children:r.jsx("p",{children:e})},e))})]})}},9821:(e,t,s)=>{"use strict";s.r(t),s.d(t,{TypingIndicator:()=>a});var r=s(326),n=s(3446);function a(){return r.jsx("div",{className:"justify-left flex space-x-1",children:r.jsx("div",{className:"rounded-lg bg-muted p-3",children:(0,r.jsxs)("div",{className:"flex -space-x-2.5",children:[r.jsx(n.Z,{className:"h-5 w-5 animate-typing-dot-bounce"}),r.jsx(n.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:90ms]"}),r.jsx(n.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:180ms]"})]})})})}},7934:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>o,__esModule:()=>a,default:()=>i});var r=s(8570);let n=(0,r.createProxy)(String.raw`/home/alce/work/home/alce/src/agents_framework/frontend/apps/www/app/(app)/page.tsx`),{__esModule:a,$$typeof:o}=n;n.default;let i=(0,r.createProxy)(String.raw`/home/alce/work/home/alce/src/agents_framework/frontend/apps/www/app/(app)/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[8134,2777,8948,969,9686,48,7874,739,500,1142,6524,8763],()=>s(9942));module.exports=r})();