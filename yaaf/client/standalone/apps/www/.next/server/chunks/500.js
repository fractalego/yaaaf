"use strict";exports.id=500,exports.ids=[500],exports.modules={500:(e,t,s)=>{s.r(t),s.d(t,{ChatMessage:()=>N});var a=s(326),l=s(7577),n=s(9155),r=s(8134),i=s(4256),o=s(8188),d=s(6470),c=s(4092),m=s(977),x=s(7863),u=s(4181);let p=u.fC,f=u.wy,h=u.Fw;var g=s(9547),j=s(739);let b=(0,n.j)("group/message relative break-words rounded-lg p-3 text-sm sm:max-w-[70%]",{variants:{isUser:{true:"bg-primary text-primary-foreground",false:"bg-muted text-foreground"},animation:{none:"",slide:"duration-300 animate-in fade-in-0",scale:"duration-300 animate-in fade-in-0 zoom-in-75",fade:"duration-500 animate-in fade-in-0"}},compoundVariants:[{isUser:!0,animation:"slide",class:"slide-in-from-right"},{isUser:!1,animation:"slide",class:"slide-in-from-left"},{isUser:!0,animation:"scale",class:"origin-bottom-right"},{isUser:!1,animation:"scale",class:"origin-bottom-left"}]}),N=({role:e,content:t,createdAt:s,showTimeStamp:n=!1,animation:r="scale",actions:o,experimental_attachments:d,toolInvocations:c,parts:m})=>{console.log(t);let u=-1==t.indexOf("<taskcompleted/>"),p=(0,l.useMemo)(()=>d?.map(e=>new File([function(e){let t=e.split(",")[1];return new Uint8Array(Buffer.from(t,"base64"))}(e.url)],e.name??"Unknown")),[d]),f="user"===e,h=s?.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return f?(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col",f?"items-end":"items-start"),children:[p?a.jsx("div",{className:"mb-1 flex flex-wrap gap-2",children:p.map((e,t)=>a.jsx(g.FilePreview,{file:e},t))}):null,a.jsx("div",{className:(0,x.cn)(b({isUser:f,animation:r})),children:a.jsx(j.MarkdownRenderer,{children:t})}),n&&s?a.jsx("time",{dateTime:s.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==r&&"duration-500 animate-in fade-in-0"),children:h}):null]}):m&&m.length>0?m.map((t,l)=>{if("text"===t.type){let d=t.text;return d=(d=(d=d.replaceAll("<br/>","\n")).replaceAll("&quot;",'"')).replaceAll("&nbsp;&nbsp;&nbsp;&nbsp;","	"),(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col",f?"items-end":"items-start"),children:[(0,a.jsxs)("div",{className:(0,x.cn)(b({isUser:f,animation:r})),children:[a.jsx(j.MarkdownRenderer,{children:d}),o?a.jsx("div",{className:"absolute -bottom-4 right-2 flex space-x-1 rounded-lg border bg-background p-1 text-foreground opacity-0 transition-opacity group-hover/message:opacity-100",children:o}):null,"assistant"==e&&u?a.jsx(i.Z,{className:"mt-5 h-5 w-5 animate-spin"}):null]}),n&&s?a.jsx("time",{dateTime:s.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==r&&"duration-500 animate-in fade-in-0"),children:h}):null]},`text-${l}`)}return"reasoning"===t.type?a.jsx(w,{part:t},`reasoning-${l}`):"tool-invocation"===t.type?a.jsx(v,{toolInvocations:[t.toolInvocation]},`tool-${l}`):null}):c&&c.length>0?a.jsx(v,{toolInvocations:c}):(0,a.jsxs)("div",{className:(0,x.cn)("flex flex-col",f?"items-end":"items-start"),children:[(0,a.jsxs)("div",{className:(0,x.cn)(b({isUser:f,animation:r})),children:[a.jsx(j.MarkdownRenderer,{children:t}),o?a.jsx("div",{className:"absolute -bottom-4 right-2 flex space-x-1 rounded-lg border bg-background p-1 text-foreground opacity-0 transition-opacity group-hover/message:opacity-100",children:o}):null]}),n&&s?a.jsx("time",{dateTime:s.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==r&&"duration-500 animate-in fade-in-0"),children:h}):null]})},w=({part:e})=>{let[t,s]=(0,l.useState)(!1);return a.jsx("div",{className:"mb-2 flex flex-col items-start sm:max-w-[70%]",children:(0,a.jsxs)(p,{open:t,onOpenChange:s,className:"group w-full overflow-hidden rounded-lg border bg-muted/50",children:[a.jsx("div",{className:"flex items-center p-2",children:a.jsx(f,{asChild:!0,children:(0,a.jsxs)("button",{className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[a.jsx(o.Z,{className:"h-4 w-4 transition-transform group-data-[state=open]:rotate-90"}),a.jsx("span",{children:"Thinking"})]})})}),a.jsx(h,{forceMount:!0,children:a.jsx(r.E.div,{initial:!1,animate:t?"open":"closed",variants:{open:{height:"auto",opacity:1},closed:{height:0,opacity:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"border-t",children:a.jsx("div",{className:"p-2",children:a.jsx("div",{className:"whitespace-pre-wrap text-xs",children:e.reasoning})})})})]})})};function v({toolInvocations:e}){return e?.length?a.jsx("div",{className:"flex flex-col items-start gap-2",children:e.map((e,t)=>{if("result"===e.state&&!0===e.result.__cancelled)return(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[a.jsx(d.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Cancelled"," ",(0,a.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]})]})]},t);switch(e.state){case"partial-call":case"call":return(0,a.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[a.jsx(c.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Calling"," ",(0,a.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]}),"..."]}),a.jsx(i.Z,{className:"h-3 w-3 animate-spin"})]},t);case"result":return(0,a.jsxs)("div",{className:"flex flex-col gap-1.5 rounded-lg border bg-muted/50 px-3 py-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[a.jsx(m.Z,{className:"h-4 w-4"}),(0,a.jsxs)("span",{children:["Result from"," ",(0,a.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]})]})]}),a.jsx("pre",{className:"overflow-x-auto whitespace-pre-wrap text-foreground",children:JSON.stringify(e.result,null,2)})]},t);default:return null}})}):null}},9547:(e,t,s)=>{s.r(t),s.d(t,{FilePreview:()=>d});var a=s(326),l=s(7577),n=s.n(l),r=s(8134),i=s(3861),o=s(1312);let d=n().forwardRef((e,t)=>e.file.type.startsWith("image/")?a.jsx(c,{...e,ref:t}):e.file.type.startsWith("text/")||e.file.name.endsWith(".txt")||e.file.name.endsWith(".md")?a.jsx(m,{...e,ref:t}):a.jsx(x,{...e,ref:t}));d.displayName="FilePreview";let c=n().forwardRef(({file:e,onRemove:t},s)=>(0,a.jsxs)(r.E.div,{ref:s,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[a.jsx("img",{alt:`Attachment ${e.name}`,className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted object-cover",src:URL.createObjectURL(e)}),a.jsx("span",{className:"w-full truncate text-muted-foreground",children:e.name})]}),t?a.jsx("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:t,"aria-label":"Remove attachment",children:a.jsx(i.Z,{className:"h-2.5 w-2.5"})}):null]}));c.displayName="ImageFilePreview";let m=n().forwardRef(({file:e,onRemove:t},s)=>{let[o,d]=n().useState("");return(0,l.useEffect)(()=>{let t=new FileReader;t.onload=e=>{let t=e.target?.result;d(t.slice(0,50)+(t.length>50?"...":""))},t.readAsText(e)},[e]),(0,a.jsxs)(r.E.div,{ref:s,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[a.jsx("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted p-0.5",children:a.jsx("div",{className:"h-full w-full overflow-hidden text-[6px] leading-none text-muted-foreground",children:o||"Loading..."})}),a.jsx("span",{className:"w-full truncate text-muted-foreground",children:e.name})]}),t?a.jsx("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:t,"aria-label":"Remove attachment",children:a.jsx(i.Z,{className:"h-2.5 w-2.5"})}):null]})});m.displayName="TextFilePreview";let x=n().forwardRef(({file:e,onRemove:t},s)=>(0,a.jsxs)(r.E.div,{ref:s,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,a.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[a.jsx("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted",children:a.jsx(o.Z,{className:"h-6 w-6 text-foreground"})}),a.jsx("span",{className:"w-full truncate text-muted-foreground",children:e.name})]}),t?a.jsx("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:t,"aria-label":"Remove attachment",children:a.jsx(i.Z,{className:"h-2.5 w-2.5"})}):null]}));x.displayName="GenericFilePreview"}};