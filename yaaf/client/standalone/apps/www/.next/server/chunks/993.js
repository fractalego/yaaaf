"use strict";exports.id=993,exports.ids=[993,8025,2740,2626],exports.modules={7272:(e,t,s)=>{s.d(t,{K:()=>n});async function n(e){let t=new File([e],"recording.webm",{type:"audio/webm"}),s=new FormData;s.append("audio",t);let n=await fetch("/api/transcribe",{method:"POST",body:s});if(!n.ok)throw Error((await n.json()).error||"Failed to transcribe audio");return(await n.json()).text}},993:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var n=s(326),a=s(7577),r=s(7272),l=s(8025),o=s(1142);function i(){let[e,t]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),c=(0,a.useRef)(),u=()=>{c.current&&window.clearTimeout(c.current)},d=(e,t)=>{u();let s=window.setTimeout(e,t);c.current=s};return n.jsx(l.ChatForm,{className:"w-full max-w-[500px]",isPending:!1,handleSubmit:e=>{e?.preventDefault?.(),t(""),i(!0),d(()=>{i(!1)},2e3)},children:({files:a,setFiles:l})=>n.jsx(o.MessageInput,{value:e,onChange:e=>{t(e.target.value)},allowAttachments:!0,files:a,setFiles:l,stop:()=>{i(!1),u()},isGenerating:s,transcribeAudio:r.K})})}},2740:(e,t,s)=>{s.r(t),s.d(t,{useAutoScroll:()=>a});var n=s(7577);function a(e){let t=(0,n.useRef)(null),s=(0,n.useRef)(null),[a,r]=(0,n.useState)(!0);return{containerRef:t,scrollToBottom:()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)},handleScroll:()=>{if(t.current){let{scrollTop:e,scrollHeight:n,clientHeight:a}=t.current,l=!!s.current&&e<s.current,o=s.current?s.current-e:0;l&&o>10?r(!1):r(50>Math.abs(n-e-a)),s.current=e}},shouldAutoScroll:a,handleTouchStart:()=>{r(!1)}}}},8025:(e,t,s)=>{s.r(t),s.d(t,{Chat:()=>p,ChatContainer:()=>g,ChatForm:()=>j,ChatMessages:()=>x});var n=s(326),a=s(7577),r=s(4274),l=s(8610),o=s(2112),i=s(7863),c=s(2740),u=s(1613),d=s(6699),m=s(1142),h=s(1015),f=s(2626);function p({messages:e,handleSubmit:t,input:s,handleInputChange:o,stop:i,isGenerating:c,append:p,suggestions:w,className:v,onRateResponse:b,setMessages:N,transcribeAudio:y}){let C=e.at(-1),S=0===e.length,T=C?.role==="user",I=(0,a.useRef)(e);I.current=e;let k=(0,a.useCallback)(()=>{if(i?.(),!N)return;let e=[...I.current],t=e.findLast(e=>"assistant"===e.role);if(!t)return;let s=!1,n={...t};if(t.toolInvocations){let e=t.toolInvocations.map(e=>"call"===e.state?(s=!0,{...e,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}):e);s&&(n={...n,toolInvocations:e})}if(t.parts&&t.parts.length>0){let e=t.parts.map(e=>"tool-invocation"===e.type&&e.toolInvocation&&"call"===e.toolInvocation.state?(s=!0,{...e,toolInvocation:{...e.toolInvocation,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}}):e);s&&(n={...n,parts:e})}if(s){let s=e.findIndex(e=>e.id===t.id);-1!==s&&(e[s]=n,N(e))}},[i,N,I]),F=(0,a.useCallback)(e=>({actions:b?(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"border-r pr-1",children:n.jsx(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),n.jsx(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>b(e.id,"thumbs-up"),children:n.jsx(r.Z,{className:"h-4 w-4"})}),n.jsx(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>b(e.id,"thumbs-down"),children:n.jsx(l.Z,{className:"h-4 w-4"})})]}):n.jsx(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),[b]);return(0,n.jsxs)(g,{className:v,children:[S&&p&&w?n.jsx(f.PromptSuggestions,{label:"Try these prompts âœ¨",append:p,suggestions:w}):null,e.length>0?n.jsx(x,{messages:e,children:n.jsx(h.MessageList,{messages:e,isTyping:T,messageOptions:F})}):null,n.jsx(j,{className:"mt-auto",isPending:c||T,handleSubmit:t,children:({files:e,setFiles:t})=>n.jsx(m.MessageInput,{value:s,onChange:o,allowAttachments:!0,files:e,setFiles:t,stop:k,isGenerating:c,transcribeAudio:y})})]})}function x({messages:e,children:t}){let{containerRef:s,scrollToBottom:a,handleScroll:r,shouldAutoScroll:l,handleTouchStart:i}=(0,c.useAutoScroll)([e]);return(0,n.jsxs)("div",{className:"grid grid-cols-1 overflow-y-auto pb-4",ref:s,onScroll:r,onTouchStart:i,children:[n.jsx("div",{className:"max-w-full [grid-column:1/1] [grid-row:1/1]",children:t}),!l&&n.jsx("div",{className:"pointer-events-none flex flex-1 items-end justify-end [grid-column:1/1] [grid-row:1/1]",children:n.jsx("div",{className:"sticky bottom-0 left-0 flex w-full justify-end",children:n.jsx(u.z,{onClick:a,className:"pointer-events-auto h-8 w-8 rounded-full ease-in-out animate-in fade-in-0 slide-in-from-bottom-1",size:"icon",variant:"ghost",children:n.jsx(o.Z,{className:"h-4 w-4"})})})})]})}p.displayName="Chat";let g=(0,a.forwardRef)(({className:e,...t},s)=>n.jsx("div",{ref:s,className:(0,i.cn)("grid max-h-full w-full grid-rows-[1fr_auto]",e),...t}));g.displayName="ChatContainer";let j=(0,a.forwardRef)(({children:e,handleSubmit:t,isPending:s,className:r},l)=>{let[o,i]=(0,a.useState)(null);return n.jsx("form",{ref:l,onSubmit:e=>{if(!o){t(e);return}t(e,{experimental_attachments:function(e){let t=new DataTransfer;for(let s of Array.from(e))t.items.add(s);return t.files}(o)}),i(null)},className:r,children:e({files:o,setFiles:i})})});j.displayName="ChatForm"},1015:(e,t,s)=>{s.r(t),s.d(t,{MessageList:()=>l});var n=s(326),a=s(500),r=s(9821);function l({messages:e,showTimeStamps:t=!0,isTyping:s=!1,messageOptions:l}){return(0,n.jsxs)("div",{className:"space-y-4 overflow-visible",children:[e.map((e,s)=>{let r="function"==typeof l?l(e):l;return n.jsx(a.ChatMessage,{showTimeStamp:t,...e,...r},s)}),s&&n.jsx(r.TypingIndicator,{})]})}},2626:(e,t,s)=>{s.r(t),s.d(t,{PromptSuggestions:()=>a});var n=s(326);function a({label:e,append:t,suggestions:s}){return(0,n.jsxs)("div",{className:"space-y-6",children:[n.jsx("h2",{className:"text-center text-2xl font-bold",children:e}),n.jsx("div",{className:"flex gap-6 text-sm",children:s.map(e=>n.jsx("button",{onClick:()=>t({role:"user",content:e}),className:"h-max flex-1 rounded-xl border bg-background p-4 hover:bg-muted",children:n.jsx("p",{children:e})},e))})]})}},9821:(e,t,s)=>{s.r(t),s.d(t,{TypingIndicator:()=>r});var n=s(326),a=s(3446);function r(){return n.jsx("div",{className:"justify-left flex space-x-1",children:n.jsx("div",{className:"rounded-lg bg-muted p-3",children:(0,n.jsxs)("div",{className:"flex -space-x-2.5",children:[n.jsx(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce"}),n.jsx(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:90ms]"}),n.jsx(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:180ms]"})]})})})}}};