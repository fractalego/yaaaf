"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{20069:(e,t,a)=>{a.r(t),a.d(t,{ChatMessage:()=>N});var s=a(57437),l=a(2265),n=a(32222),r=a(71636),i=a(85712),o=a(78169),d=a(49067),c=a(99118),m=a(76660),x=a(37440),u=a(64719);let p=u.fC,f=u.wy,h=u.Fw;var g=a(97585),j=a(95890),b=a(7393).Buffer;let v=(0,n.j)("group/message relative break-words rounded-lg p-3 text-sm sm:max-w-[70%]",{variants:{isUser:{true:"bg-primary text-primary-foreground",false:"bg-muted text-foreground"},animation:{none:"",slide:"duration-300 animate-in fade-in-0",scale:"duration-300 animate-in fade-in-0 zoom-in-75",fade:"duration-500 animate-in fade-in-0"}},compoundVariants:[{isUser:!0,animation:"slide",class:"slide-in-from-right"},{isUser:!1,animation:"slide",class:"slide-in-from-left"},{isUser:!0,animation:"scale",class:"origin-bottom-right"},{isUser:!1,animation:"scale",class:"origin-bottom-left"}]}),N=e=>{let{role:t,content:a,createdAt:n,showTimeStamp:r=!1,animation:o="scale",actions:d,experimental_attachments:c,toolInvocations:m,parts:u}=e;console.log(a);let p=-1==a.indexOf("<taskcompleted/>"),f=(0,l.useMemo)(()=>null==c?void 0:c.map(e=>{var t;return new File([function(e){let t=e.split(",")[1];return new Uint8Array(b.from(t,"base64"))}(e.url)],null!==(t=e.name)&&void 0!==t?t:"Unknown")}),[c]),h="user"===t,N=null==n?void 0:n.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return h?(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-col",h?"items-end":"items-start"),children:[f?(0,s.jsx)("div",{className:"mb-1 flex flex-wrap gap-2",children:f.map((e,t)=>(0,s.jsx)(g.FilePreview,{file:e},t))}):null,(0,s.jsx)("div",{className:(0,x.cn)(v({isUser:h,animation:o})),children:(0,s.jsx)(j.MarkdownRenderer,{children:a})}),r&&n?(0,s.jsx)("time",{dateTime:n.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==o&&"duration-500 animate-in fade-in-0"),children:N}):null]}):u&&u.length>0?u.map((e,a)=>{if("text"===e.type){let l=e.text;return l=(l=(l=l.replaceAll("<br/>","\n")).replaceAll("&quot;",'"')).replaceAll("&nbsp;&nbsp;&nbsp;&nbsp;","	"),(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-col",h?"items-end":"items-start"),children:[(0,s.jsxs)("div",{className:(0,x.cn)(v({isUser:h,animation:o})),children:[(0,s.jsx)(j.MarkdownRenderer,{children:l}),d?(0,s.jsx)("div",{className:"absolute -bottom-4 right-2 flex space-x-1 rounded-lg border bg-background p-1 text-foreground opacity-0 transition-opacity group-hover/message:opacity-100",children:d}):null,"assistant"==t&&p?(0,s.jsx)(i.Z,{className:"mt-5 h-5 w-5 animate-spin"}):null]}),r&&n?(0,s.jsx)("time",{dateTime:n.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==o&&"duration-500 animate-in fade-in-0"),children:N}):null]},"text-".concat(a))}return"reasoning"===e.type?(0,s.jsx)(w,{part:e},"reasoning-".concat(a)):"tool-invocation"===e.type?(0,s.jsx)(y,{toolInvocations:[e.toolInvocation]},"tool-".concat(a)):null}):m&&m.length>0?(0,s.jsx)(y,{toolInvocations:m}):(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-col",h?"items-end":"items-start"),children:[(0,s.jsxs)("div",{className:(0,x.cn)(v({isUser:h,animation:o})),children:[(0,s.jsx)(j.MarkdownRenderer,{children:a}),d?(0,s.jsx)("div",{className:"absolute -bottom-4 right-2 flex space-x-1 rounded-lg border bg-background p-1 text-foreground opacity-0 transition-opacity group-hover/message:opacity-100",children:d}):null]}),r&&n?(0,s.jsx)("time",{dateTime:n.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==o&&"duration-500 animate-in fade-in-0"),children:N}):null]})},w=e=>{let{part:t}=e,[a,n]=(0,l.useState)(!1);return(0,s.jsx)("div",{className:"mb-2 flex flex-col items-start sm:max-w-[70%]",children:(0,s.jsxs)(p,{open:a,onOpenChange:n,className:"group w-full overflow-hidden rounded-lg border bg-muted/50",children:[(0,s.jsx)("div",{className:"flex items-center p-2",children:(0,s.jsx)(f,{asChild:!0,children:(0,s.jsxs)("button",{className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 transition-transform group-data-[state=open]:rotate-90"}),(0,s.jsx)("span",{children:"Thinking"})]})})}),(0,s.jsx)(h,{forceMount:!0,children:(0,s.jsx)(r.E.div,{initial:!1,animate:a?"open":"closed",variants:{open:{height:"auto",opacity:1},closed:{height:0,opacity:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"border-t",children:(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)("div",{className:"whitespace-pre-wrap text-xs",children:t.reasoning})})})})]})})};function y(e){let{toolInvocations:t}=e;return(null==t?void 0:t.length)?(0,s.jsx)("div",{className:"flex flex-col items-start gap-2",children:t.map((e,t)=>{if("result"===e.state&&!0===e.result.__cancelled)return(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Cancelled"," ",(0,s.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]})]})]},t);switch(e.state){case"partial-call":case"call":return(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Calling"," ",(0,s.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]}),"..."]}),(0,s.jsx)(i.Z,{className:"h-3 w-3 animate-spin"})]},t);case"result":return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 rounded-lg border bg-muted/50 px-3 py-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Result from"," ",(0,s.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]})]})]}),(0,s.jsx)("pre",{className:"overflow-x-auto whitespace-pre-wrap text-foreground",children:JSON.stringify(e.result,null,2)})]},t);default:return null}})}):null}},97585:(e,t,a)=>{a.r(t),a.d(t,{FilePreview:()=>o});var s=a(57437),l=a(2265),n=a(71636),r=a(55188),i=a(27069);let o=l.forwardRef((e,t)=>e.file.type.startsWith("image/")?(0,s.jsx)(d,{...e,ref:t}):e.file.type.startsWith("text/")||e.file.name.endsWith(".txt")||e.file.name.endsWith(".md")?(0,s.jsx)(c,{...e,ref:t}):(0,s.jsx)(m,{...e,ref:t}));o.displayName="FilePreview";let d=l.forwardRef((e,t)=>{let{file:a,onRemove:l}=e;return(0,s.jsxs)(n.E.div,{ref:t,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)("img",{alt:"Attachment ".concat(a.name),className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted object-cover",src:URL.createObjectURL(a)}),(0,s.jsx)("span",{className:"w-full truncate text-muted-foreground",children:a.name})]}),l?(0,s.jsx)("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:l,"aria-label":"Remove attachment",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5"})}):null]})});d.displayName="ImageFilePreview";let c=l.forwardRef((e,t)=>{let{file:a,onRemove:i}=e,[o,d]=l.useState("");return(0,l.useEffect)(()=>{let e=new FileReader;e.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;d(a.slice(0,50)+(a.length>50?"...":""))},e.readAsText(a)},[a]),(0,s.jsxs)(n.E.div,{ref:t,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted p-0.5",children:(0,s.jsx)("div",{className:"h-full w-full overflow-hidden text-[6px] leading-none text-muted-foreground",children:o||"Loading..."})}),(0,s.jsx)("span",{className:"w-full truncate text-muted-foreground",children:a.name})]}),i?(0,s.jsx)("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:i,"aria-label":"Remove attachment",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5"})}):null]})});c.displayName="TextFilePreview";let m=l.forwardRef((e,t)=>{let{file:a,onRemove:l}=e;return(0,s.jsxs)(n.E.div,{ref:t,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted",children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-foreground"})}),(0,s.jsx)("span",{className:"w-full truncate text-muted-foreground",children:a.name})]}),l?(0,s.jsx)("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:l,"aria-label":"Remove attachment",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5"})}):null]})});m.displayName="GenericFilePreview"}}]);